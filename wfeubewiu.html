<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../../Images/J&F_icon.png">
    <link rel="stylesheet" href="../../style.css">
    <script src="../../Functions.js"></script>
    <link rel="stylesheet" href="infosUser.css">
    <title>J&F_Game</title>
</head>
<body>
    <div class="voltar">
        <a href="../../index.html"><img src="../../Images/Seta_esqueda.png" alt=""></a>
        <h6>Valores J&F</h6>
    </div>
    <form action="" id="cadastroForm">
        <h1>Cadastro</h1>
        <input type="text" name="name" id="nome" placeholder="Nome" required>
        <input type="email" name="email" id="email" placeholder="Email" required>
        <input type="password" name="password" id="senha" placeholder="Senha" required>
        <button class="botao">Cadastrar</button>
    </form>
    <div class="meio">
        <h2><a href="./TelaLogin.html">Já possui cadastro? Clique aqui!</a></h2>
    </div>

    <script>

    const formulario = document.querySelector("form")
    const Inome = document.getElementById("nome")
    const Iemail = document.getElementById("email")
    const Isenha = document.getElementById("senha")

        function redirecionar(){
            setTimeout(function() {
            window.location.href = "../Apresentacoes/ApresentacaoValores.html"; 
            }, 1500);
        }

        function cadastrar () { 
            fetch("",
                {
                    headers:{
                        'Accept': "application/json",
                        'Content-type': "application/json"
                    },
                    method: "POST",
                    body: JSON.stringify({ 
                    })
                }
            )   
            .then(function (res) {
                const resposta = res.status;
                if(resposta == 201){
                    localStorage.setItem('idUser', Iemail.value)
                    window.alert("Cadastro realizado com sucesso! ")
                    redirecionar()
                } else if (resposta == 409){
                    window.alert("Esse E-mail já foi cadastrado, por favor utilize outro ou faça o login...")
                } else if( resposta == 500){
                    window.alert("Problemas com o nosso servidor, por favor tente mais tarde...")
                } else{
                    window.alert("Olhar erro, pq n era pra dar")
                }
            })
            .catch(function (res) { console.log( res.status )})
        }

        formulario.addEventListener('submit', function (event) {
            event.preventDefault();

            cadastrar();
        })
    </script>
</body>
</html>