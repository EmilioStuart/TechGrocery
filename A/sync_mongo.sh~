#!/bin/bash

# Configura√ß√µes - edite com os dados do seu banco
MONGO_URI="mongodb+srv://funciona:1234567890@ftp.3s82q.mongodb.net/DADProject"
DATABASE="DADProject"
BACKUP_DIR="./backup"

# Mostra o que est√° sendo feito
echo "üì¶ Fazendo dump do banco na nuvem ($DATABASE)..."
mongodump --uri="$MONGO_URI" --out="$BACKUP_DIR"

if [ $? -ne 0 ]; then
  echo "‚ùå Erro ao fazer o dump. Verifique a URI e tente novamente."
  exit 1
fi

echo "üßπ Restaurando banco local com --drop (sobrescrita for√ßada)..."
mongorestore --drop --db "$DATABASE" "$BACKUP_DIR/$DATABASE"

if [ $? -ne 0 ]; then
  echo "‚ùå Erro ao restaurar o banco local."
  exit 1
fi

echo "‚úÖ Sincroniza√ß√£o conclu√≠da com sucesso!"
